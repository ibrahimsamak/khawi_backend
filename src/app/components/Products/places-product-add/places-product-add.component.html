<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="edit-profile">
        <div class="col-lg-12">
            <form class="card">
                <div class="card-header">
                    <h4 class="card-title mb-0">اضافة او تعديل المنتجات</h4>
                    <div class="card-options">
                        <a class="card-options-collapse" [routerLink]="" data-toggle="card-collapse"><i
                                class="fe fe-chevron-up"></i>
                        </a>
                        <a class="card-options-remove" [routerLink]="" data-toggle="card-remove"><i class="fe fe-x"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <form #form="ngForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="coupon">المنتج</label>
                                    <div class="input-group">
                                        <select required name="product_id" id="product_id" #product_id="ngModel"
                                            [(ngModel)]="productDetails.product_id" class="form-control"
                                            (change)="changeProduct($event.target.value,null)">
                                            <option value="">اختر المنتج </option>
                                            <option *ngFor="let item of products" value="{{item._id}}">{{item.arName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div *ngIf="(product_id.errors && product_id.invalid && (product_id.dirty || product_id.touched))"
                                        class="text text-danger">
                                        الحقل مطلوب
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="coupon">مزود الخدمة</label>
                                    <div class="input-group">
                                        <select required name="supplier_id" id="supplier_id" #supplier_id="ngModel"
                                            [(ngModel)]="productDetails.supplier_id" class="form-control"
                                            (change)="changeSupplier($event.target.value)">
                                            <option value="">اختر مزود الخدمة </option>
                                            <option *ngFor="let item of providers" value="{{item._id}}">{{item.name}}
                                            </option>
                                        </select>
                                    </div>
                                    <div *ngIf="(supplier_id.errors && supplier_id.invalid && (supplier_id.dirty || supplier_id.touched))"
                                        class="text text-danger">
                                        الحقل مطلوب
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="coupon">المدينة</label>
                                    <div class="input-group">
                                        <select required name="city_id" id="city_id" #city_id="ngModel"
                                            [(ngModel)]="productDetails.city_id" class="form-control"
                                            (change)="changeCity($event.target.value)">
                                            <option value="">اختر المدينة </option>
                                            <option *ngFor="let item of cities" value="{{item._id}}">{{item.arName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div *ngIf="(city_id.errors && city_id.invalid && (city_id.dirty || city_id.touched))"
                                        class="text text-danger">
                                        الحقل مطلوب
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="coupon">منطقة التوزيع</label>
                                    <div class="input-group">
                                        <select required name="place_id" id="place_id" #place_id="ngModel"
                                            [(ngModel)]="productDetails.place_id" class="form-control"
                                            (change)="changePlace($event.target.value)">
                                            <option value="">اختر منطقة التوزيع </option>
                                            <option *ngFor="let item of places" value="{{item._id}}">{{item.arName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div *ngIf="(place_id.errors && place_id.invalid && (place_id.dirty || place_id.touched))"
                                        class="text text-danger">
                                        الحقل مطلوب
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3" *ngIf="productDetails?.product?.isNewProduct">
                                <div class="form-group">
                                    <label class="form-label">سعر شراء جديد</label>
                                    <input required class="form-control" type="number" min="0" id="price_for_new"
                                        name="price_for_new" #price_for_new="ngModel"
                                        [(ngModel)]="productDetails.price_for_new" >
                                    <div *ngIf="(price_for_new.errors && price_for_new.invalid && (price_for_new.dirty || price_for_new.touched))"
                                        class="text text-danger">
                                        الحقل مطلوب
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3" *ngIf="productDetails?.product?.isNewProduct">
                                <div class="form-group">
                                    <label class="form-label">الخصم على شراء جديد</label>
                                    <input required class="form-control" type="number" min="0" id="discountPrice"
                                        name="discountPrice" #discountPrice="ngModel"
                                        [(ngModel)]="productDetails.discountPrice" >
                                </div>
                                <div *ngIf="(discountPrice.errors && discountPrice.invalid && (discountPrice.dirty || discountPrice.touched))"
                                    class="text text-danger">
                                    الحقل مطلوب
                                </div>
                            </div>
                            <div class="col-md-3" *ngIf="productDetails?.product?.isReplacement">
                                <div class="form-group">
                                    <label class="form-label">سعر التبديل</label>
                                    <input required class="form-control" type="number" min="0" id="price_for_replacment"
                                        name="price_for_replacment" #price_for_replacment="ngModel"
                                        [(ngModel)]="productDetails.price_for_replacment" >
                                </div>
                                <div *ngIf="(price_for_replacment.errors && price_for_replacment.invalid && (price_for_replacment.dirty || price_for_replacment.touched))"
                                    class="text text-danger">
                                    الحقل مطلوب
                                </div>
                            </div>
                            <div class="col-md-3" *ngIf="productDetails?.product?.isReplacement">
                                <div class="form-group">
                                    <label class="form-label">الخصم على سعر التبديل</label>
                                    <input required class="form-control" type="number" min="0"
                                        id="discountPriceReplacment" name="discountPriceReplacment"
                                        #discountPriceReplacment="ngModel"
                                        [(ngModel)]="productDetails.discountPriceReplacment" >
                                </div>
                                <div *ngIf="(discountPriceReplacment.errors && discountPriceReplacment.invalid && (discountPriceReplacment.dirty || discountPriceReplacment.touched))"
                                    class="text text-danger">
                                    الحقل مطلوب
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label class="form-label">سعر التوصيل</label>
                                    <input required class="form-control" type="number" min="0" id="deliveryCost"
                                        name="deliveryCost" #deliveryCost="ngModel"
                                        [(ngModel)]="productDetails.deliveryCost" >
                                </div>
                                <div *ngIf="(deliveryCost.errors && deliveryCost.invalid && (deliveryCost.dirty || deliveryCost.touched))"
                                    class="text text-danger">
                                    الحقل مطلوب
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label class="form-label">التوصيل السريع</label>
                                    <input required class="form-control" type="number" min="0" id="expressCost"
                                        name="expressCost" #expressCost="ngModel"
                                        [(ngModel)]="productDetails.expressCost" >
                                </div>
                                <div *ngIf="(expressCost.errors && expressCost.invalid && (expressCost.dirty || expressCost.touched))"
                                    class="text text-danger">
                                    الحقل مطلوب
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="form-label">المنطقة المغطاة</label>
                                    <agm-map [zoom]="15" [latitude]="lat" [longitude]="lng" #agmMap [scrollwheel]="true"
                                        [disableDoubleClickZoom]="false" [mapDraggable]="true" [zoomControl]="true"
                                        [mapTypeControl]="true" [mapTypeId]="'hybrid'">
                                    </agm-map>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="card-footer text-right">
                    <button class="btn btn-primary" [class.loader--text]="showLoader"
                        [disabled]="!form.valid || showLoader" (click)="saveProduct()" type="submit">
                        <span>
                            {{ showLoader ? '' : 'حفظ المعلومات'}}
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>